@* 
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "GetProfileImage";
}


<div class="profile-container">
    <div class="profile-image">
        <img id="adminprofileImage" src="~/Images/default.png" alt="Profile Image"
             style="width: 150px; height: 150px; border-radius: 10px; object-fit: cover;" />
    </div>
    <div class="profile-info">
        <h3 id="fullName">Full Name</h3>
        <p><strong>Email:</strong> <span id="email">Email</span></p>
        <p><strong>Username:</strong> <span id="username">Username</span></p>
        <p><strong>Mobile Number:</strong> <span id="mobileNumber">Mobile Number</span></p>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var userId = localStorage.getItem("UserId"); 

        if (userId) {
            fetchUserProfile(userId);
        }
    });

    function fetchUserProfile(userId) {
        $.ajax({
            url: '/Admin/GetUserProfile',
            type: 'GET',
            data: { userId: userId },
            success: function (response) {
                if (response) {
                    populateProfileData(response);
                } else {
                    alert("Failed to fetch user profile.");
                }
            },
            error: function () {
                alert("An error occurred while fetching profile data.");
            }
        });
    }

    function populateProfileData(data) {
        if (data.profileImage) {
            document.getElementById("adminprofileImage").src = data.profileImage;
        }

        document.getElementById("fullName").textContent = data.fullName || "N/A";
        document.getElementById("email").textContent = data.email || "N/A";
        document.getElementById("username").textContent = data.username || "N/A";
        document.getElementById("mobileNumber").textContent = data.mobileNumber || "N/A";
    }

</script> *@



@model HealthBridges.Models.EditProfileViewModel

@{
    ViewBag.Title = "Edit Profile";
}

<h2>Edit Profile</h2>

@using (Html.BeginForm("GetUserProfile", "Admin", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-group">
        @Html.HiddenFor(m => m.UserId)

        <label for="FullName">Full Name</label>
        @Html.TextBoxFor(m => m.FullName, new { @class = "form-control", placeholder = "Enter full name" })
        @Html.ValidationMessageFor(m => m.FullName, "", new { @class = "text-danger" })

        <label for="Username">Username</label>
        @Html.TextBoxFor(m => m.Username, new { @class = "form-control", placeholder = "Enter username" })
        @Html.ValidationMessageFor(m => m.Username, "", new { @class = "text-danger" })

        <label for="Email">Email</label>
        @Html.TextBoxFor(m => m.Email, new { @class = "form-control", placeholder = "Enter email" })
        @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })

        <label for="ProfileImage">Profile Image URL</label>
        @Html.TextBoxFor(m => m.ProfileImage, new { @class = "form-control", placeholder = "Enter image URL" })

        <label for="MobileNumber">Mobile Number</label>
        @Html.TextBoxFor(m => m.MobileNumber, new { @class = "form-control", placeholder = "Enter mobile number" })
    </div>

    <button type="submit" class="btn btn-primary">Save Changes</button>
}
